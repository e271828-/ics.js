/*! ics.js Sun Sep 07 2014 23:55:28 */
var ics=function(){"use strict";navigator.userAgent.indexOf("MSIE")>-1&&-1==navigator.userAgent.indexOf("MSIE 10")&&console.log("Unsupported Browser");var a=-1!==navigator.appVersion.indexOf("Win")?"\r\n":"\n",b=[],c=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Prompt.ly//Prompt.ly//EN"].join(a),d=a+"END:VCALENDAR";return{events:function(){return b},calendar:function(){return c+a+b.join(a)+d},addEvent:function(c,d,e,f,g,h,i){if("undefined"==typeof c||"undefined"==typeof d||"undefined"==typeof e||"undefined"==typeof f||"undefined"==typeof g||"undefined"==typeof h)return!1;if(i&&!i.rule){if("YEARLY"!==i.freq&&"MONTHLY"!==i.freq&&"WEEKLY"!==i.freq&&"DAILY"!==i.freq)throw"Recurrence rule frequency must be provided and be one of the following: 'YEARLY', 'MONTHLY', 'WEEKLY', or 'DAILY'";if(i.until&&isNaN(Date.parse(i.until)))throw"Recurrence rule 'until' must be a valid date string";if(i.interval&&isNaN(parseInt(i.interval)))throw"Recurrence rule 'interval' must be an integer";if(i.count&&isNaN(parseInt(i.count)))throw"Recurrence rule 'count' must be an integer"}var j,k,l=new Date(g),m=new Date(h),n=("0000"+l.getFullYear().toString()).slice(-4),o=("00"+(l.getMonth()+1).toString()).slice(-2),p=("00"+l.getDate().toString()).slice(-2),q=("00"+l.getHours().toString()).slice(-2),r=("00"+l.getMinutes().toString()).slice(-2),s=("00"+l.getMinutes().toString()).slice(-2),t=("0000"+m.getFullYear().toString()).slice(-4),u=("00"+(m.getMonth()+1).toString()).slice(-2),v=("00"+m.getDate().toString()).slice(-2),w=("00"+m.getHours().toString()).slice(-2),x=("00"+m.getMinutes().toString()).slice(-2),y=("00"+m.getMinutes().toString()).slice(-2),z="T"+q+r+s,A="T"+w+x+y;"undefined"!=typeof moment?(console.log("using moment"),j=moment(g).toISOString().replace(/-|:|\./g,"").slice(0,-4)+"Z",k=moment(h).toISOString().replace(/-|:|\./g,"").slice(0,-4)+"Z"):(console.log("moment not defined"),j=n+o+p+z,k=t+u+v+A);var B;if(i)if(i.rule)B=i.rule;else{if(B="RRULE:FREQ="+i.freq,i.until){var C=new Date(Date.parse(i.until)).toISOString();B+=";UNTIL="+C.substring(0,C.length-13).replace(/[-]/g,"")+"000000Z"}i.interval&&(B+=";INTERVAL="+i.interval),i.count&&(B+=";COUNT="+i.count)}var D=["BEGIN:VEVENT","CLASS:PUBLIC","DESCRIPTION:"+d,"URL;VALUE=URI:"+e,"DTSTART:"+j,"DTEND:"+k,"LOCATION:"+f,"SUMMARY;LANGUAGE=en-us:"+c,"TRANSP:TRANSPARENT","END:VEVENT"];return B&&D.splice(4,0,B),D=D.join(a),b.push(D),D},download:function(e,f){if(b.length<1)return!1;f="undefined"!=typeof f?f:".ics",e="undefined"!=typeof e?e:"calendar";var g,h=c+a+b.join(a)+d;if(-1===navigator.userAgent.indexOf("MSIE 10"))g=new Blob([h]);else{var i=new BlobBuilder;i.append(h),g=i.getBlob("text/x-vCalendar;charset="+document.characterSet)}return saveAs(g,e+f),h}}};